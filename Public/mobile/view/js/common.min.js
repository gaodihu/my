var common={init:function(){var hg=$(window).height();$("body,html,.bgcolor").css({"min-height":hg});this.getlocalList()},sliding_event:function(id){var slider=Swipe(document.getElementById(id),{auto:4000,continuous:true,callback:function(pos){var bullets=document.getElementById('position').getElementsByTagName('i');var i=bullets.length;while(i--){bullets[i].className=' '}bullets[pos].className='on'}})},timer:function(cls,time,type){var sh=setInterval(function(){var day=0,hour=0,minute=0,second=0;if(time>0){day=Math.floor(time/(60*60*24));hour=Math.floor(time/(60*60))-(day*24);minute=Math.floor(time/60)-(day*24*60)-(hour*60);second=Math.floor(time)-(day*24*60*60)-(hour*60*60)-(minute*60)}if(minute<=9)minute='0'+minute;if(second<=9)second='0'+second;if(type=="day"){cls.html("<b>"+day+" </b>days  <b>  "+hour+"</b> : <b>"+minute+"</b> : <b>"+second+"</b>")}else{cls.html("<b>"+day+" </b> : <b>  "+hour+"</b> : <b>"+minute+"</b> : <b>"+second+"</b>")}if(time<=0){clearInterval(sh)}time--},1000)},filter_tab:function(index_id,id){$("#"+index_id).hide();$("#"+id).show()},getlocalList:function(){if(window.localStorage.getItem("query-list-data")!=null){var obj=JSON.parse(window.localStorage.getItem("query-list-data"));$.each(obj.arry,function(index,content){var search_keyword=common.search_keyword(content);$(".local-data .query-list").append("<li><a href='s/"+search_keyword+".html'>"+content+"</a></li>")})}},search_keyword:function(content){var search_keyword='';var search_words=content.split(' ');for(var i=0;i<search_words.length;i++){word=search_words[i];if(word!=''&&word!=' '){search_keyword+=encodeURIComponent(word)+'+'}}search_keyword=search_keyword.replace(/\++/g,'+');search_keyword=search_keyword.substr(0,search_keyword.length-1);return search_keyword},search_input:function(){var search=$(".search-input").val(),lo_data=window.localStorage.getItem("query-list-data");search=search.replace(/[\`\~!\@#\$%\^&*()_+=|\\\{\}\[\];:"'<,>.?\/]/gm,' ');search=search.replace(/^\s+|\s+$/gm,' ');if(search.length>=2){var url_search='';var search_keyword='';var search_words=search.split(' ');for(var i=0;i<search_words.length;i++){word=search_words[i];if(word!=''&&word!=' '){search_keyword+=encodeURIComponent(word)+'+'}}search_keyword=search_keyword.replace(/\++/g,'+');search_keyword=search_keyword.substr(0,search_keyword.length-1)}if(search==""){return false}if(lo_data!=null){var obj=JSON.parse(lo_data),flg=true;$.each(obj.arry,function(index,content){if(search==content){flg=false}})if(flg){obj.arry.push(search);window.localStorage.setItem("query-list-data",JSON.stringify(obj))}}else{var obj={"arry":[]};obj.arry.push(search);window.localStorage.setItem("query-list-data",JSON.stringify(obj))}var action="s/"+search_keyword+".html";$("#queryform").attr("action",action);return true},search_ajax:function(){var search=$(".search-input").val();$.ajax({type:'POST',url:'/index.php?route=product/search/suggest&q='+search+'&limit=10',context:$('.query-data'),success:function(data){if(data==""){this.html("");return}var arry=data.split("\n");var htmls="";$.each(arry,function(index,content){if(content!=""){var search_keyword=common.search_keyword(content);htmls+="<li><a href='s/"+search_keyword+".html'>"+content+"</a></li>"}});this.html(htmls)},error:function(xhr,type){}})},alertInfo:function(msg,type){var errorClass="error-color";if(type=="error"){errorClass="error-color"}else{errorClass=""}if($(".grey-bg-z").length==0){$(".bgcolor").append("<div class='grey-bg-z'></div>");$(".bgcolor").append("<div class='alertinfo'><span class="+errorClass+">"+msg+"</span></div>");$(".grey-bg-z").show()}else{$(".grey-bg-z").show();$(".alertinfo").show();$(".alertinfo").html("<span class="+errorClass+">"+msg+"</span>")}setTimeout(function(){$(".grey-bg-z").hide();$(".alertinfo").hide()},3000)},hideBody:function(){var hg=$(window).height();$("body,html").css({height:hg+"px",overflow:"hidden"})},showBody:function(){$("body,html").css({height:"auto",overflow:"auto"})},lodShow:function(){if($(".loding-bg").length==0){$("body").append("<div class='loding-bg'><img src='/mobile/view/images/public/lod2.gif' class='loddingcss' width='60'/></div>")}$(".loding-bg").show()},lodHide:function(){$(".loding-bg").hide()}}$(document).ready(function(){common.init();$(".search-input").on("keyup",function(){if($(this).val()==""){$(".local-data").show();$(".query-data").hide()}else{$(".query-data").show();var search=$(".search-input").val();if(search.length>=3){common.search_ajax()}$(".local-data").hide()}})$(".menu .icon-search").click(function(){var hg=$(window).height();$(".query-page").css({"height":hg});$(".query-page").show();$(".query-data").html();common.hideBody()});$(".query-page .cancel").click(function(){$(".query-page").hide();common.showBody()});$(".cont .close").click(function(){$(this).parents(".pop-filter").hide();$(".grey-bg").hide();$(".fixed-btn").show();common.showBody()})$(".filter").click(function(){var hg=$(window).height();$(".pop-filter").find(".cont").css({"height":hg});$(".pop-filter").addClass("open");$("#filter").show();$(".grey-bg").show();common.hideBody()})$(".categories-list .price").click(function(){$(".pop-price").show()})$(".categories-list .reviews").click(function(){$(".pop-reviews").show()})$(".pop-left").click(function(){$(this).parents(".pop-filter").hide()})$(".order-filter").click(function(){$("#filter-order").show();$(".grey-bg").show()})$(".order-filter-close").click(function(){$("#filter-order").hide();$(".grey-bg").hide()})$(".icon-angle-left").click(function(){window.history.go(-1)})$(".cart-list .p-heart").click(function(){$(this).toggleClass("red-color")})$(".tab-active .more-info").click(function(event){var img=$(this).find("span");$(this).parents("li").find(".more-box").toggle();$(this).parents("li").siblings("li").find(".more-box").hide();if(img.attr("class")=="icon-angle-down"){img.attr("class","icon-angle-up")}else{img.attr("class","icon-angle-down")}event.stopPropagation()})$(".more-box").click(function(event){event.stopPropagation()})$(".product  .addcart .del").click(function(event){$(this).parents("li").remove();if($(".my-wish li").length==0){$(".msg-info").show()}return false;event.stopPropagation()})$(".tab-active li").click(function(){$(".tab-active").find(".more-box").hide();$(this).find(".more-box").show();if(!$(this).is(".t-title")){$(this).addClass("active").siblings("li").removeClass("active");$(this).find("input").attr('checked','checked');$(this).siblings("li").find("input").removeAttr("checked")}})$(".address-list .address-del").click(function(){$(this).parents("li").remove()})$(".lodding .active").click(function(){var me=$(this);me.toggleClass("active");me.find("i").addClass("icon-spinner").removeClass("icon-double-angle-down");setTimeout(function(){me.find("i").addClass("icon-double-angle-down").removeClass("icon-spinner");innerProduct()},1000)})$(".filter-box .filter-list .list-change").click(function(){var me=$(this);$(".filter-box .filter-list .list-change").removeClass("active");$(".filter-box .filter-list .second-list").hide();me.addClass("active");me.parents("li").find(".second-list").show()})$(".product-change .sortby").click(function(){$(".grey-bg").show();$(".sortby-list").show()})$(".canel-bg,.on-cancel").click(function(){$(this).hide();$(".confirmation").hide();$(".sortby-list").hide()})$(".product-change .sortby-list li").click(function(){$(this).parents(".product-change").find("#by-info").html($(this).find("a").html());$(this).addClass("active").siblings("li").removeClass("active");$(".grey-bg").hide();$(this).parents(".sortby-list").hide()})$(".filter-box .second-list li").click(function(){$(this).parents(".second-list").find(".icon-ok").remove();$(this).append("<span class='icon-ok green-color'></span>")})$(".icon-list").click(function(){var hg=$(window).height();$(".all-categories-page").css({"height":hg});$(".all-categories-page").addClass("open");$(".grey-bg").show();$(".product-change").css({"z-index":1});common.hideBody()})$(".on-cancel ,.all-categories-page .icon-arrow-left").click(function(){$(".all-categories-page").removeClass("open");$(".grey-bg").hide();$(".product-change").css({"z-index":601});common.showBody()})$(".head-title .icon-align-left ,.icon-th-large").click(function(){$(".product .con-box").toggleClass("list-css");if($(".product .con-box").hasClass("list-css")){document.cookie="view_list=list"}else{document.cookie="view_list=grid"}if($(this).hasClass("icon-align-left")){$(this).removeClass("icon-align-left").addClass("icon-th-large")}else{$(this).removeClass("icon-th-large").addClass("icon-align-left")}})$(".all-categories-page .all-list li a").click(function(){if($(this).hasClass("to-language")){$(".all-list").hide();$("#currency").hide();$("#language").show()}if($(this).hasClass("to-currency")){$(".all-list").hide();$("#language").hide();$("#currency").show()}})$(".all-categories-page h4 .icon-remove").click(function(){$(this).parents(".order-page").hide();$(".all-list").show()})$(".query-page .clearbtn").click(function(){window.localStorage.removeItem("query-list-data");$(".local-data .query-list").html("")})$(".addcart .min-btn").click(function(event){event.stopPropagation();return false});$(".none-click").click(function(event){event.stopPropagation();return false})});function addToWishList(product_id){$.ajax({url:'index.php?route=account/wishlist/add',type:'post',data:'product_id='+product_id,dataType:'json',success:function(json){if(json['error']==0){$(".product-info .p-heart").toggleClass("red-bg")}else if(json['error']==3){window.location.href=json['link']}else{common.alertInfo(json['message'])}}})}function addToCart(pid,qty,type){quantity=typeof(qty)!='undefined'?qty:1;type=typeof(type)!='undefined'?type:1;var ship_to='';if($('#ship_to').size()){var ship_to=$('#ship_to').val();if(ship_to==''){$('#ship_to').focus();return false}}Cart.add(pid,quantity,ship_to,function(data){if(type==1){if(!data['error']){common.alertInfo("Successfully Added");$('#cart_total').html(data['total_num'])}else{common.alertInfo(data['error'])}}else{window.location.href="/index.php?route=checkout/cart"}})}